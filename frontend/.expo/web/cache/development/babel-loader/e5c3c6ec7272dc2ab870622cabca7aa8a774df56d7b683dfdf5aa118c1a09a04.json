{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React, { useEffect, useState } from \"react\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport Pressable from \"react-native-web/dist/exports/Pressable\";\nimport { Layout } from \"../../../../components/Layout\";\nimport styles from \"./styles\";\nimport { useRequest } from \"../../../../context/RequestContext\";\nimport { getRequests } from \"../../../../Api\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nvar ClosedTicketsScreen = function ClosedTicketsScreen(_ref) {\n  var _ref2;\n  var navigation = _ref.navigation;\n  var _useRequest = useRequest(),\n    getRequest = _useRequest.getRequest;\n  var _useState = useState(null),\n    _useState2 = _slicedToArray(_useState, 2),\n    data = _useState2[0],\n    setData = _useState2[1];\n  var _useState3 = useState(\"\"),\n    _useState4 = _slicedToArray(_useState3, 2),\n    searchText = _useState4[0],\n    setSearchText = _useState4[1];\n  var _useState5 = useState([]),\n    _useState6 = _slicedToArray(_useState5, 2),\n    requerimientosData = _useState6[0],\n    setRequerimientosData = _useState6[1];\n  var _useState7 = useState([]),\n    _useState8 = _slicedToArray(_useState7, 2),\n    incidentesData = _useState8[0],\n    setIncidentesData = _useState8[1];\n  var loadRequests = function loadRequests() {\n    return (_ref2 = _ref2 || _asyncToGenerator(function* () {\n      var response = yield getRequests(2);\n      var json = yield response.data;\n      setData(json);\n    })).apply(this, arguments);\n  };\n  var handlePress = function handlePress(id) {\n    getRequest(id);\n    navigation.navigate('Details');\n  };\n  var renderTableRow = function renderTableRow(item) {\n    return _jsxs(Pressable, {\n      style: styles.tableRow,\n      onPress: function onPress() {\n        return handlePress(item.requestId);\n      },\n      children: [_jsx(Text, {\n        children: item.requestId\n      }), _jsx(Text, {\n        children: item.title\n      }), _jsx(Text, {\n        children: item.closedTime\n      })]\n    });\n  };\n  var filteredIncidentesData = incidentesData.filter(function (item) {\n    return item.nombre.toLowerCase().includes(searchText.toLowerCase());\n  });\n  useEffect(function () {\n    loadRequests();\n  }, []);\n  useEffect(function () {\n    if (data) {\n      var filteredRequerimientosData = data.filter(function (item) {\n        return [1, 2, 3, 4].includes(item.connectionId);\n      });\n      var _filteredIncidentesData = data.filter(function (item) {\n        return [5, 6, 7, 8].includes(item.connectionId);\n      });\n      setRequerimientosData(filteredRequerimientosData);\n      setIncidentesData(_filteredIncidentesData);\n    }\n  }, [data]);\n  return _jsx(Layout, {\n    navigation: navigation,\n    title: \"Consultas Cerradas\",\n    children: _jsxs(View, {\n      style: styles.container,\n      children: [_jsxs(View, {\n        style: styles.filterContainer,\n        children: [_jsx(Text, {\n          style: styles.filterText,\n          children: \"Filtro: \"\n        }), _jsx(TextInput, {\n          style: styles.filterInput,\n          placeholder: \"Buscar ticket ...\",\n          onChangeText: function onChangeText(text) {\n            return setSearchText(text);\n          }\n        })]\n      }), _jsxs(View, {\n        style: styles.sectionContainer,\n        children: [_jsx(Text, {\n          style: styles.sectionTitle,\n          children: \"Incidentes\"\n        }), _jsxs(View, {\n          style: styles.tableHeader,\n          children: [_jsx(Text, {\n            style: styles.tableHeaderText,\n            children: \"Codigo\"\n          }), _jsx(Text, {\n            style: styles.tableHeaderText,\n            children: \"T\\xEDtulo\"\n          }), _jsx(Text, {\n            style: styles.tableHeaderText,\n            children: \"Fecha\"\n          })]\n        }), _jsx(FlatList, {\n          data: filteredIncidentesData,\n          keyExtractor: function keyExtractor(item) {\n            return item.requestId.toString();\n          },\n          renderItem: function renderItem(_ref3) {\n            var item = _ref3.item;\n            return renderTableRow(item);\n          }\n        })]\n      }), _jsxs(View, {\n        style: styles.sectionContainer,\n        children: [_jsx(Text, {\n          style: styles.sectionTitle,\n          children: \"Requerimientos\"\n        }), _jsxs(View, {\n          style: styles.tableHeader,\n          children: [_jsx(Text, {\n            style: styles.tableHeaderText,\n            children: \"Codigo\"\n          }), _jsx(Text, {\n            style: styles.tableHeaderText,\n            children: \"T\\xEDtulo\"\n          }), _jsx(Text, {\n            style: styles.tableHeaderText,\n            children: \"Fecha\"\n          })]\n        }), _jsx(FlatList, {\n          data: requerimientosData,\n          keyExtractor: function keyExtractor(item) {\n            return item.requestId.toString();\n          },\n          renderItem: function renderItem(_ref4) {\n            var item = _ref4.item;\n            return renderTableRow(item);\n          }\n        })]\n      })]\n    })\n  });\n};\nexport default ClosedTicketsScreen;","map":{"version":3,"names":["React","useEffect","useState","View","Text","TextInput","FlatList","Pressable","Layout","styles","useRequest","getRequests","jsx","_jsx","jsxs","_jsxs","ClosedTicketsScreen","_ref","_ref2","navigation","_useRequest","getRequest","_useState","_useState2","_slicedToArray","data","setData","_useState3","_useState4","searchText","setSearchText","_useState5","_useState6","requerimientosData","setRequerimientosData","_useState7","_useState8","incidentesData","setIncidentesData","loadRequests","_asyncToGenerator","response","json","apply","arguments","handlePress","id","navigate","renderTableRow","item","style","tableRow","onPress","requestId","children","title","closedTime","filteredIncidentesData","filter","nombre","toLowerCase","includes","filteredRequerimientosData","connectionId","container","filterContainer","filterText","filterInput","placeholder","onChangeText","text","sectionContainer","sectionTitle","tableHeader","tableHeaderText","keyExtractor","toString","renderItem","_ref3","_ref4"],"sources":["C:/Users/USER/Downloads/G1-Soportechv13/Test/frontend/users/solver/screens/ClosedTicketsScreen/ClosedTicketsScreen.js"],"sourcesContent":["import React, {useEffect, useState} from \"react\";\r\nimport { View, Text, TextInput, FlatList, Pressable } from \"react-native\";\r\nimport { Layout } from \"../../../../components/Layout\";\r\nimport styles from './styles';\r\n\r\nimport { useRequest } from '../../../../context/RequestContext';\r\nimport { getRequests } from \"../../../../Api\";\r\n\r\nconst ClosedTicketsScreen = ({ navigation }) => {\r\n  const { getRequest } = useRequest();\r\n  const [data, setData] = useState(null);\r\n  const [searchText, setSearchText] = useState(\"\");\r\n  const [requerimientosData, setRequerimientosData] = useState([]);\r\n  const [incidentesData, setIncidentesData] = useState([]);\r\n\r\n  const loadRequests = async () => {\r\n    const response = await getRequests(2);\r\n    const json = await response.data;\r\n    setData(json);\r\n  }\r\n\r\n  const handlePress = (id) => {\r\n    getRequest(id);\r\n    navigation.navigate('Details');\r\n  }\r\n  \r\n\r\n  const renderTableRow = (item) => (\r\n    <Pressable \r\n      style={styles.tableRow}\r\n      onPress={() => handlePress(item.requestId)}\r\n    >\r\n      <Text>{item.requestId}</Text>\r\n      <Text>{item.title}</Text>\r\n      <Text>{item.closedTime}</Text>\r\n    </Pressable>\r\n  );\r\n\r\n  const filteredIncidentesData = incidentesData.filter((item) =>\r\n    item.nombre.toLowerCase().includes(searchText.toLowerCase())\r\n  );\r\n\r\n  useEffect(() => {\r\n    loadRequests();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (data) {\r\n      const filteredRequerimientosData = data.filter(item => [1, 2, 3, 4].includes(item.connectionId));\r\n      const filteredIncidentesData = data.filter(item => [5, 6, 7, 8].includes(item.connectionId));\r\n\r\n      setRequerimientosData(filteredRequerimientosData);\r\n      setIncidentesData(filteredIncidentesData);\r\n    }\r\n  }, [data]);\r\n\r\n  return (\r\n    <Layout \r\n      navigation={navigation}\r\n      title=\"Consultas Cerradas\"\r\n    >\r\n      <View style={styles.container}>\r\n        <View style={styles.filterContainer}>\r\n          <Text style={styles.filterText}>Filtro: </Text>\r\n          <TextInput\r\n            style={styles.filterInput}\r\n            placeholder=\"Buscar ticket ...\"\r\n            onChangeText={(text) => setSearchText(text)}\r\n          />\r\n        </View>\r\n\r\n        <View style={styles.sectionContainer}>\r\n          <Text style={styles.sectionTitle}>Incidentes</Text>\r\n          <View style={styles.tableHeader}>\r\n            <Text style={styles.tableHeaderText}>Codigo</Text>\r\n            <Text style={styles.tableHeaderText}>Título</Text>\r\n            <Text style={styles.tableHeaderText}>Fecha</Text>\r\n          </View>\r\n          <FlatList\r\n            data={filteredIncidentesData}\r\n            keyExtractor={(item) => item.requestId.toString()}\r\n            renderItem={({ item }) => renderTableRow(item)}\r\n          />\r\n        </View>\r\n\r\n        <View style={styles.sectionContainer}>\r\n          <Text style={styles.sectionTitle}>Requerimientos</Text>\r\n          <View style={styles.tableHeader}>\r\n            <Text style={styles.tableHeaderText}>Codigo</Text>\r\n            <Text style={styles.tableHeaderText}>Título</Text>\r\n            <Text style={styles.tableHeaderText}>Fecha</Text>\r\n          </View>\r\n          <FlatList\r\n            data={requerimientosData}\r\n            keyExtractor={(item) => item.requestId.toString()}\r\n            renderItem={({ item }) => renderTableRow(item)}\r\n          />\r\n        </View>\r\n      </View>\r\n    </Layout>\r\n  );\r\n}\r\n\r\nexport default ClosedTicketsScreen;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}