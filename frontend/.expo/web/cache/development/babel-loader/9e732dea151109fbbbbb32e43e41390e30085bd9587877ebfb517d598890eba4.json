{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport { createContext, useState, useContext, useEffect } from \"react\";\nimport { getRequest as getR, getLog as getL } from \"../Api\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nvar RequestContext = createContext();\nvar useRequest = function useRequest() {\n  var context = useContext(RequestContext);\n  if (!context) {\n    throw new Error(\"useContext must be used within an RequestProvider\");\n  }\n  return context;\n};\nvar RequestProvider = function RequestProvider(_ref) {\n  var _ref2, _ref3;\n  var children = _ref.children;\n  var _useState = useState(false),\n    _useState2 = _slicedToArray(_useState, 2),\n    loading = _useState2[0],\n    setLoading = _useState2[1];\n  var _useState3 = useState(null),\n    _useState4 = _slicedToArray(_useState3, 2),\n    request = _useState4[0],\n    setRequest = _useState4[1];\n  var _useState5 = useState(null),\n    _useState6 = _slicedToArray(_useState5, 2),\n    log = _useState6[0],\n    setLog = _useState6[1];\n  var _useState7 = useState([]),\n    _useState8 = _slicedToArray(_useState7, 2),\n    errors = _useState8[0],\n    setErrors = _useState8[1];\n  var getRequest = function getRequest(_x) {\n    return (_ref2 = _ref2 || _asyncToGenerator(function* (id) {\n      try {\n        setLoading(true);\n        var res = yield getR(id);\n        setRequest(res.data);\n      } catch (error) {\n        setErrors(error.response.data);\n      } finally {\n        setLoading(false);\n      }\n    })).apply(this, arguments);\n  };\n  var getLog = function getLog(_x2) {\n    return (_ref3 = _ref3 || _asyncToGenerator(function* (id) {\n      try {\n        setLoading(true);\n        var res = yield getL(id);\n        setLog(res.data);\n      } catch (error) {\n        setErrors(error.response.data);\n      } finally {\n        setLoading(false);\n      }\n    })).apply(this, arguments);\n  };\n  useEffect(function () {\n    if (errors.length > 0) {\n      var timer = setTimeout(function () {\n        setErrors([]);\n      }, 5000);\n      return function () {\n        return clearTimeout(timer);\n      };\n    }\n  }, [errors]);\n  return _jsx(RequestContext.Provider, {\n    value: {\n      getRequest: getRequest,\n      getLog: getLog,\n      loading: loading,\n      request: request,\n      log: log,\n      errors: errors\n    },\n    children: children\n  });\n};\nexport { RequestContext, RequestProvider, useRequest };","map":{"version":3,"names":["createContext","useState","useContext","useEffect","getRequest","getR","getLog","getL","jsx","_jsx","RequestContext","useRequest","context","Error","RequestProvider","_ref","_ref2","_ref3","children","_useState","_useState2","_slicedToArray","loading","setLoading","_useState3","_useState4","request","setRequest","_useState5","_useState6","log","setLog","_useState7","_useState8","errors","setErrors","_x","_asyncToGenerator","id","res","data","error","response","apply","arguments","_x2","length","timer","setTimeout","clearTimeout","Provider","value"],"sources":["C:/Users/Mauro Retuerto/Desktop/Mauro/FISI/CICLO 8/Moviles/G1-Soportech/Test/frontend/context/RequestContext.js"],"sourcesContent":["import { createContext, useState, useContext, useEffect } from \"react\";\nimport { \n  getRequest as getR,\n  getLog as getL\n} from \"../Api\";\n\nconst RequestContext = createContext();\n\nconst useRequest = () => {\n  const context = useContext(RequestContext);\n\n  if (!context) {\n    throw new Error(\"useContext must be used within an RequestProvider\");\n  }\n\n  return context;\n};\n\nconst RequestProvider = ({ children }) => {\n  const [loading, setLoading] = useState(false);\n  const [request, setRequest] = useState(null);\n  const [log, setLog] = useState(null);\n  const [errors, setErrors] = useState([]);\n\n  const getRequest = async (id) => {\n    try {\n      setLoading(true);\n      const res = await getR(id);\n      setRequest(res.data);\n    } catch (error) {\n      setErrors(error.response.data);\n    } finally {\n      setLoading(false);\n    }\n  }  \n\n  const getLog = async (id) => {\n    try {\n      setLoading(true);\n      const res = await getL(id);\n      setLog(res.data);\n    } catch (error) {\n      setErrors(error.response.data);\n    } finally {\n      setLoading(false);\n    }\n  }\n\n  useEffect(() => {\n    if(errors.length > 0) {\n      const timer = setTimeout(() => {\n        setErrors([]);\n      }, 5000)\n      return () => clearTimeout(timer);\n    }\n  }\n  , [errors]);\n\n  return (\n    <RequestContext.Provider\n      value={{\n        getRequest,\n        getLog,\n        loading,\n        request,\n        log,\n        errors,\n      }}\n    >\n      {children}\n    </RequestContext.Provider>\n  );\n};\n\nexport { RequestContext, RequestProvider, useRequest}"],"mappings":";;AAAA,SAASA,aAAa,EAAEC,QAAQ,EAAEC,UAAU,EAAEC,SAAS,QAAQ,OAAO;AACtE,SACEC,UAAU,IAAIC,IAAI,EAClBC,MAAM,IAAIC,IAAI;AACA,SAAAC,GAAA,IAAAC,IAAA;AAEhB,IAAMC,cAAc,GAAGV,aAAa,CAAC,CAAC;AAEtC,IAAMW,UAAU,GAAG,SAAbA,UAAUA,CAAA,EAAS;EACvB,IAAMC,OAAO,GAAGV,UAAU,CAACQ,cAAc,CAAC;EAE1C,IAAI,CAACE,OAAO,EAAE;IACZ,MAAM,IAAIC,KAAK,CAAC,mDAAmD,CAAC;EACtE;EAEA,OAAOD,OAAO;AAChB,CAAC;AAED,IAAME,eAAe,GAAG,SAAlBA,eAAeA,CAAAC,IAAA,EAAqB;EAAA,IAAAC,KAAA,EAAAC,KAAA;EAAA,IAAfC,QAAQ,GAAAH,IAAA,CAARG,QAAQ;EACjC,IAAAC,SAAA,GAA8BlB,QAAQ,CAAC,KAAK,CAAC;IAAAmB,UAAA,GAAAC,cAAA,CAAAF,SAAA;IAAtCG,OAAO,GAAAF,UAAA;IAAEG,UAAU,GAAAH,UAAA;EAC1B,IAAAI,UAAA,GAA8BvB,QAAQ,CAAC,IAAI,CAAC;IAAAwB,UAAA,GAAAJ,cAAA,CAAAG,UAAA;IAArCE,OAAO,GAAAD,UAAA;IAAEE,UAAU,GAAAF,UAAA;EAC1B,IAAAG,UAAA,GAAsB3B,QAAQ,CAAC,IAAI,CAAC;IAAA4B,UAAA,GAAAR,cAAA,CAAAO,UAAA;IAA7BE,GAAG,GAAAD,UAAA;IAAEE,MAAM,GAAAF,UAAA;EAClB,IAAAG,UAAA,GAA4B/B,QAAQ,CAAC,EAAE,CAAC;IAAAgC,UAAA,GAAAZ,cAAA,CAAAW,UAAA;IAAjCE,MAAM,GAAAD,UAAA;IAAEE,SAAS,GAAAF,UAAA;EAExB,IAAM7B,UAAU,YAAVA,UAAUA,CAAAgC,EAAA;IAAA,QAAApB,KAAA,GAAAA,KAAA,IAAAqB,iBAAA,CAAG,WAAOC,EAAE,EAAK;MAC/B,IAAI;QACFf,UAAU,CAAC,IAAI,CAAC;QAChB,IAAMgB,GAAG,SAASlC,IAAI,CAACiC,EAAE,CAAC;QAC1BX,UAAU,CAACY,GAAG,CAACC,IAAI,CAAC;MACtB,CAAC,CAAC,OAAOC,KAAK,EAAE;QACdN,SAAS,CAACM,KAAK,CAACC,QAAQ,CAACF,IAAI,CAAC;MAChC,CAAC,SAAS;QACRjB,UAAU,CAAC,KAAK,CAAC;MACnB;IACF,CAAC,GAAAoB,KAAA,OAAAC,SAAA;EAAA;EAED,IAAMtC,MAAM,YAANA,MAAMA,CAAAuC,GAAA;IAAA,QAAA5B,KAAA,GAAAA,KAAA,IAAAoB,iBAAA,CAAG,WAAOC,EAAE,EAAK;MAC3B,IAAI;QACFf,UAAU,CAAC,IAAI,CAAC;QAChB,IAAMgB,GAAG,SAAShC,IAAI,CAAC+B,EAAE,CAAC;QAC1BP,MAAM,CAACQ,GAAG,CAACC,IAAI,CAAC;MAClB,CAAC,CAAC,OAAOC,KAAK,EAAE;QACdN,SAAS,CAACM,KAAK,CAACC,QAAQ,CAACF,IAAI,CAAC;MAChC,CAAC,SAAS;QACRjB,UAAU,CAAC,KAAK,CAAC;MACnB;IACF,CAAC,GAAAoB,KAAA,OAAAC,SAAA;EAAA;EAEDzC,SAAS,CAAC,YAAM;IACd,IAAG+B,MAAM,CAACY,MAAM,GAAG,CAAC,EAAE;MACpB,IAAMC,KAAK,GAAGC,UAAU,CAAC,YAAM;QAC7Bb,SAAS,CAAC,EAAE,CAAC;MACf,CAAC,EAAE,IAAI,CAAC;MACR,OAAO;QAAA,OAAMc,YAAY,CAACF,KAAK,CAAC;MAAA;IAClC;EACF,CAAC,EACC,CAACb,MAAM,CAAC,CAAC;EAEX,OACEzB,IAAA,CAACC,cAAc,CAACwC,QAAQ;IACtBC,KAAK,EAAE;MACL/C,UAAU,EAAVA,UAAU;MACVE,MAAM,EAANA,MAAM;MACNgB,OAAO,EAAPA,OAAO;MACPI,OAAO,EAAPA,OAAO;MACPI,GAAG,EAAHA,GAAG;MACHI,MAAM,EAANA;IACF,CAAE;IAAAhB,QAAA,EAEDA;EAAQ,CACc,CAAC;AAE9B,CAAC;AAED,SAASR,cAAc,EAAEI,eAAe,EAAEH,UAAU"},"metadata":{},"sourceType":"module","externalDependencies":[]}