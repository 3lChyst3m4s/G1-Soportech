{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React, { useEffect, useState } from \"react\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport Pressable from \"react-native-web/dist/exports/Pressable\";\nimport { Layout } from \"../../../../components/Layout\";\nimport styles from \"./styles\";\nimport { useRequest } from \"../../../../context/RequestContext\";\nimport { getRequests } from \"../../../../Api\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nvar ClosedTicketsScreen = function ClosedTicketsScreen(_ref) {\n  var _ref2;\n  var navigation = _ref.navigation;\n  var _useRequest = useRequest(),\n    getRequest = _useRequest.getRequest;\n  var _useState = useState(null),\n    _useState2 = _slicedToArray(_useState, 2),\n    data = _useState2[0],\n    setData = _useState2[1];\n  var _useState3 = useState(\"\"),\n    _useState4 = _slicedToArray(_useState3, 2),\n    searchText = _useState4[0],\n    setSearchText = _useState4[1];\n  var _useState5 = useState([]),\n    _useState6 = _slicedToArray(_useState5, 2),\n    requerimientosData = _useState6[0],\n    setRequerimientosData = _useState6[1];\n  var _useState7 = useState([]),\n    _useState8 = _slicedToArray(_useState7, 2),\n    incidentesData = _useState8[0],\n    setIncidentesData = _useState8[1];\n  var loadRequests = function loadRequests() {\n    return (_ref2 = _ref2 || _asyncToGenerator(function* () {\n      var response = yield getRequests(2);\n      var json = yield response.data;\n      setData(json);\n    })).apply(this, arguments);\n  };\n  var handlePress = function handlePress(id) {\n    getRequest(id);\n    navigation.navigate('Details');\n  };\n  var renderTableRow = function renderTableRow(item) {\n    return _jsxs(Pressable, {\n      style: styles.tableRow,\n      onPress: function onPress() {\n        return handlePress(item.requestId);\n      },\n      children: [_jsx(Text, {\n        children: item.requestId\n      }), _jsx(Text, {\n        children: item.title\n      }), _jsx(Text, {\n        children: item.closedTime\n      })]\n    });\n  };\n  var filteredIncidentesData = incidentesData.filter(function (item) {\n    return item.title.toLowerCase().includes(searchText.toLowerCase());\n  });\n  useEffect(function () {\n    loadRequests();\n  }, []);\n  useEffect(function () {\n    if (data) {\n      var filteredRequerimientosData = data.filter(function (item) {\n        return [1, 2, 3, 4].includes(item.connectionId);\n      });\n      var _filteredIncidentesData = data.filter(function (item) {\n        return [5, 6, 7, 8].includes(item.connectionId);\n      });\n      setRequerimientosData(filteredRequerimientosData);\n      setIncidentesData(_filteredIncidentesData);\n    }\n  }, [data]);\n  return _jsx(Layout, {\n    navigation: navigation,\n    title: \"Consultas Cerradas\",\n    children: _jsxs(View, {\n      style: styles.container,\n      children: [_jsxs(View, {\n        style: styles.filterContainer,\n        children: [_jsx(Text, {\n          style: styles.filterText,\n          children: \"Filtro: \"\n        }), _jsx(TextInput, {\n          style: styles.filterInput,\n          placeholder: \"Buscar ticket ...\",\n          onChangeText: function onChangeText(text) {\n            return setSearchText(text);\n          }\n        })]\n      }), _jsxs(View, {\n        style: styles.sectionContainer,\n        children: [_jsx(Text, {\n          style: styles.sectionTitle,\n          children: \"Incidentes\"\n        }), _jsxs(View, {\n          style: styles.tableHeader,\n          children: [_jsx(Text, {\n            style: styles.tableHeaderText,\n            children: \"Codigo\"\n          }), _jsx(Text, {\n            style: styles.tableHeaderText,\n            children: \"T\\xEDtulo\"\n          }), _jsx(Text, {\n            style: styles.tableHeaderText,\n            children: \"Fecha\"\n          })]\n        }), _jsx(FlatList, {\n          data: filteredIncidentesData,\n          keyExtractor: function keyExtractor(item) {\n            return item.requestId.toString();\n          },\n          renderItem: function renderItem(_ref3) {\n            var item = _ref3.item;\n            return renderTableRow(item);\n          }\n        })]\n      }), _jsxs(View, {\n        style: styles.sectionContainer,\n        children: [_jsx(Text, {\n          style: styles.sectionTitle,\n          children: \"Requerimientos\"\n        }), _jsxs(View, {\n          style: styles.tableHeader,\n          children: [_jsx(Text, {\n            style: styles.tableHeaderText,\n            children: \"Codigo\"\n          }), _jsx(Text, {\n            style: styles.tableHeaderText,\n            children: \"T\\xEDtulo\"\n          }), _jsx(Text, {\n            style: styles.tableHeaderText,\n            children: \"Fecha\"\n          })]\n        }), _jsx(FlatList, {\n          data: requerimientosData,\n          keyExtractor: function keyExtractor(item) {\n            return item.requestId.toString();\n          },\n          renderItem: function renderItem(_ref4) {\n            var item = _ref4.item;\n            return renderTableRow(item);\n          }\n        })]\n      })]\n    })\n  });\n};\nexport default ClosedTicketsScreen;","map":{"version":3,"names":["React","useEffect","useState","View","Text","TextInput","FlatList","Pressable","Layout","styles","useRequest","getRequests","jsx","_jsx","jsxs","_jsxs","ClosedTicketsScreen","_ref","_ref2","navigation","_useRequest","getRequest","_useState","_useState2","_slicedToArray","data","setData","_useState3","_useState4","searchText","setSearchText","_useState5","_useState6","requerimientosData","setRequerimientosData","_useState7","_useState8","incidentesData","setIncidentesData","loadRequests","_asyncToGenerator","response","json","apply","arguments","handlePress","id","navigate","renderTableRow","item","style","tableRow","onPress","requestId","children","title","closedTime","filteredIncidentesData","filter","toLowerCase","includes","filteredRequerimientosData","connectionId","container","filterContainer","filterText","filterInput","placeholder","onChangeText","text","sectionContainer","sectionTitle","tableHeader","tableHeaderText","keyExtractor","toString","renderItem","_ref3","_ref4"],"sources":["C:/Users/Mauro Retuerto/Desktop/Mauro/FISI/CICLO 8/Moviles/G1-Soportech/Test/frontend/users/client/screens/ClosedTicketsScreen/ClosedTicketsScreen.js"],"sourcesContent":["import React, {useEffect, useState} from \"react\";\nimport { View, Text, TextInput, FlatList, Pressable } from \"react-native\";\nimport { Layout } from \"../../../../components/Layout\";\nimport styles from './styles';\n\nimport { useRequest } from '../../../../context/RequestContext';\nimport { getRequests } from \"../../../../Api\";\n\nconst ClosedTicketsScreen = ({ navigation }) => {\n  const { getRequest } = useRequest();\n  const [data, setData] = useState(null);\n  const [searchText, setSearchText] = useState(\"\");\n  const [requerimientosData, setRequerimientosData] = useState([]);\n  const [incidentesData, setIncidentesData] = useState([]);\n\n  const loadRequests = async () => {\n    const response = await getRequests(2);\n    const json = await response.data;\n    setData(json);\n  }\n\n  const handlePress = (id) => {\n    getRequest(id);\n    navigation.navigate('Details');\n  }\n  \n\n  const renderTableRow = (item) => (\n    <Pressable \n      style={styles.tableRow}\n      onPress={() => handlePress(item.requestId)}\n    >\n      <Text>{item.requestId}</Text>\n      <Text>{item.title}</Text>\n      <Text>{item.closedTime}</Text>\n    </Pressable>\n  );\n\n  const filteredIncidentesData = incidentesData.filter((item) =>\n    item.title.toLowerCase().includes(searchText.toLowerCase())\n  );\n\n  useEffect(() => {\n    loadRequests();\n  }, []);\n\n  useEffect(() => {\n    if (data) {\n      const filteredRequerimientosData = data.filter(item => [1, 2, 3, 4].includes(item.connectionId));\n      const filteredIncidentesData = data.filter(item => [5, 6, 7, 8].includes(item.connectionId));\n\n      setRequerimientosData(filteredRequerimientosData);\n      setIncidentesData(filteredIncidentesData);\n    }\n  }, [data]);\n\n  return (\n    <Layout \n      navigation={navigation}\n      title=\"Consultas Cerradas\"\n    >\n      <View style={styles.container}>\n        <View style={styles.filterContainer}>\n          <Text style={styles.filterText}>Filtro: </Text>\n          <TextInput\n            style={styles.filterInput}\n            placeholder=\"Buscar ticket ...\"\n            onChangeText={(text) => setSearchText(text)}\n          />\n        </View>\n\n        <View style={styles.sectionContainer}>\n          <Text style={styles.sectionTitle}>Incidentes</Text>\n          <View style={styles.tableHeader}>\n            <Text style={styles.tableHeaderText}>Codigo</Text>\n            <Text style={styles.tableHeaderText}>Título</Text>\n            <Text style={styles.tableHeaderText}>Fecha</Text>\n          </View>\n          <FlatList\n            data={filteredIncidentesData}\n            keyExtractor={(item) => item.requestId.toString()}\n            renderItem={({ item }) => renderTableRow(item)}\n          />\n        </View>\n\n        <View style={styles.sectionContainer}>\n          <Text style={styles.sectionTitle}>Requerimientos</Text>\n          <View style={styles.tableHeader}>\n            <Text style={styles.tableHeaderText}>Codigo</Text>\n            <Text style={styles.tableHeaderText}>Título</Text>\n            <Text style={styles.tableHeaderText}>Fecha</Text>\n          </View>\n          <FlatList\n            data={requerimientosData}\n            keyExtractor={(item) => item.requestId.toString()}\n            renderItem={({ item }) => renderTableRow(item)}\n          />\n        </View>\n      </View>\n    </Layout>\n  );\n}\n\nexport default ClosedTicketsScreen;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}