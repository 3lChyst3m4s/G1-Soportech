{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport { createContext, useState, useContext, useEffect } from \"react\";\nimport { registerRequest, loginRequest } from \"../Api\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nvar AuthContext = createContext();\nvar useAuth = function useAuth() {\n  var context = useContext(AuthContext);\n  if (!context) {\n    throw new Error(\"useAuth must be used within an AuthProvider\");\n  }\n  return context;\n};\nvar AuthProvider = function AuthProvider(_ref) {\n  var _ref2, _ref3;\n  var children = _ref.children;\n  var _useState = useState(null),\n    _useState2 = _slicedToArray(_useState, 2),\n    user = _useState2[0],\n    setUser = _useState2[1];\n  var _useState3 = useState(false),\n    _useState4 = _slicedToArray(_useState3, 2),\n    isAuthenticated = _useState4[0],\n    setIsAuthenticated = _useState4[1];\n  var _useState5 = useState([]),\n    _useState6 = _slicedToArray(_useState5, 2),\n    errors = _useState6[0],\n    setErrors = _useState6[1];\n  var signup = function signup(_x) {\n    return (_ref2 = _ref2 || _asyncToGenerator(function* (user) {\n      try {\n        var res = yield registerRequest(user);\n        setUser(res.data);\n        setIsAuthenticated(true);\n      } catch (error) {\n        if (error.response && error.response.data) {\n          setErrors(error.response.data);\n        } else {\n          console.error(\"Unexpected error:\", error);\n          setErrors([{\n            message: \"Unexpected error occurred\"\n          }]);\n        }\n      }\n    })).apply(this, arguments);\n  };\n  var login = function login(_x2) {\n    return (_ref3 = _ref3 || _asyncToGenerator(function* (user) {\n      try {\n        var res = yield loginRequest(user);\n        setUser(res.data);\n        setIsAuthenticated(true);\n      } catch (error) {\n        if (error.response && error.response.data) {\n          setErrors(error.response.data);\n        } else {\n          console.error(\"Unexpected error:\", error);\n          setErrors([{\n            message: \"Unexpected error occurred\"\n          }]);\n        }\n      }\n    })).apply(this, arguments);\n  };\n  var logout = function logout() {\n    setUser(null);\n    setIsAuthenticated(false);\n  };\n  useEffect(function () {\n    if (errors.length > 0) {\n      var timer = setTimeout(function () {\n        setErrors([]);\n      }, 5000);\n      return function () {\n        return clearTimeout(timer);\n      };\n    }\n  }, [errors]);\n  return _jsx(AuthContext.Provider, {\n    value: {\n      signup: signup,\n      login: login,\n      logout: logout,\n      user: user,\n      isAuthenticated: isAuthenticated,\n      errors: errors\n    },\n    children: children\n  });\n};\nexport { AuthContext, AuthProvider, useAuth };","map":{"version":3,"names":["createContext","useState","useContext","useEffect","registerRequest","loginRequest","jsx","_jsx","AuthContext","useAuth","context","Error","AuthProvider","_ref","_ref2","_ref3","children","_useState","_useState2","_slicedToArray","user","setUser","_useState3","_useState4","isAuthenticated","setIsAuthenticated","_useState5","_useState6","errors","setErrors","signup","_x","_asyncToGenerator","res","data","error","response","console","message","apply","arguments","login","_x2","logout","length","timer","setTimeout","clearTimeout","Provider","value"],"sources":["C:/Users/USER/Downloads/G1-Soportechv13/Test/frontend/context/AuthContext.js"],"sourcesContent":["import { createContext, useState, useContext, useEffect } from \"react\";\r\nimport { registerRequest, loginRequest } from \"../Api\";\r\n\r\nconst AuthContext = createContext();\r\n\r\nconst useAuth = () => {\r\n  const context = useContext(AuthContext);\r\n\r\n  if (!context) {\r\n    throw new Error(\"useAuth must be used within an AuthProvider\");\r\n  }\r\n\r\n  return context;\r\n};\r\n\r\nconst AuthProvider = ({ children }) => {\r\n  const [user, setUser] = useState(null);\r\n  const [isAuthenticated, setIsAuthenticated] = useState(false);\r\n  const [errors, setErrors] = useState([]);\r\n\r\n  const signup = async (user) => {\r\n    try {\r\n      const res = await registerRequest(user);\r\n      setUser(res.data);\r\n      setIsAuthenticated(true);\r\n    } catch (error) {\r\n      if (error.response && error.response.data) {\r\n        setErrors(error.response.data);\r\n      } else {\r\n        console.error(\"Unexpected error:\", error);\r\n        setErrors([{ message: \"Unexpected error occurred\" }]);\r\n      }\r\n    }\r\n  };\r\n\r\n  const login = async (user) => {\r\n    try {\r\n      const res = await loginRequest(user);\r\n      setUser(res.data);\r\n      setIsAuthenticated(true);\r\n    } catch (error) {\r\n      if (error.response && error.response.data) {\r\n        setErrors(error.response.data);\r\n      } else {\r\n        console.error(\"Unexpected error:\", error);\r\n        setErrors([{ message: \"Unexpected error occurred\" }]);\r\n      }\r\n    }\r\n  };\r\n\r\n  const logout = () => {\r\n    setUser(null);\r\n    setIsAuthenticated(false);\r\n  };\r\n\r\n  useEffect(() => {\r\n    if(errors.length > 0) {\r\n      const timer = setTimeout(() => {\r\n        setErrors([]);\r\n      }, 5000)\r\n      return () => clearTimeout(timer);\r\n    }\r\n  }\r\n  , [errors]);\r\n\r\n  return (\r\n    <AuthContext.Provider\r\n      value={{\r\n        signup,\r\n        login,\r\n        logout,\r\n        user,\r\n        isAuthenticated,\r\n        errors,\r\n      }}\r\n    >\r\n      {children}\r\n    </AuthContext.Provider>\r\n  );\r\n};\r\n\r\nexport { AuthContext, AuthProvider, useAuth}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}